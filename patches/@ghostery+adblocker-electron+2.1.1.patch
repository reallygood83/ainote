# =================================================================== 
# Patch: Modifications to @ghostery/adblocker-electron
# Author: Deta Team
# License: Mozilla Public License 2.0 (https://mozilla.org/MPL/2.0/)
# Original work licensed under MPL-2.0
# 
# Description: Added optional parameter 'registerWebRequestHandlers' to 
# control whether web request handlers are registered, allowing more 
# flexible integration with Electron applications.
# 
# Modified Files:
# - dist/adblocker.umd.min.js
# - dist/commonjs/index.js  
# - dist/esm/index.js
# - Related TypeScript definition files
# 
# Source Repository: https://github.com/deta/adblocker
# ===================================================================
diff --git a/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js b/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js
index 35484ec..caae162 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js
+++ b/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js
@@ -1,2 +1,2 @@
-!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("electron"),require("tldts-experimental"),require("@ghostery/adblocker"),require("node:module")):"function"==typeof define&&define.amd?define(["exports","electron","tldts-experimental","@ghostery/adblocker","node:module"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).adblocker={},e.electron,e.tldtsExperimental,e.adblocker,e.node_module)}(this,(function(e,t,s,o,r){"use strict";var n="undefined"!=typeof document?document.currentScript:null;function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(s){if("default"!==s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}})),t.default=e,Object.freeze(t)}var l=i(t);const c=r.createRequire("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:n&&"SCRIPT"===n.tagName.toUpperCase()&&n.src||new URL("adblocker.umd.min.js",document.baseURI).href).resolve("@ghostery/adblocker-electron-preload"),{ipcMain:a}=l;function d(e){const{id:t,url:s,resourceType:r,referrer:n,webContentsId:i}=e;return o.Request.fromRawDetails(i?{_originalRequestDetails:e,requestId:`${t}`,sourceUrl:n,tabId:i,type:r||"other",url:s}:{_originalRequestDetails:e,requestId:`${t}`,sourceUrl:n,type:r||"other",url:s})}process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";class u{constructor(e,t){this.session=e,this.blocker=t,this.onBeforeRequest=(e,s)=>t.onBeforeRequest(e,s),this.onInjectCosmeticFilters=(e,s,o)=>t.onInjectCosmeticFilters(e,s,o),this.onHeadersReceived=(e,s)=>t.onHeadersReceived(e,s),this.onIsMutationObserverEnabled=e=>t.onIsMutationObserverEnabled(e)}enable(){!0===this.blocker.config.loadCosmeticFilters&&(this.session.setPreloads(this.session.getPreloads().concat([c])),a.handle("@ghostery/adblocker/inject-cosmetic-filters",this.onInjectCosmeticFilters),a.handle("@ghostery/adblocker/is-mutation-observer-enabled",this.onIsMutationObserverEnabled)),!0===this.blocker.config.loadNetworkFilters&&(this.session.webRequest.onHeadersReceived({urls:["<all_urls>"]},this.onHeadersReceived),this.session.webRequest.onBeforeRequest({urls:["<all_urls>"]},this.onBeforeRequest))}disable(){!0===this.blocker.config.loadNetworkFilters&&(this.session.webRequest.onHeadersReceived(null),this.session.webRequest.onBeforeRequest(null)),!0===this.blocker.config.loadCosmeticFilters&&(this.session.setPreloads(this.session.getPreloads().filter((e=>e!==c))),a.removeHandler("@ghostery/adblocker/inject-cosmetic-filters"),a.removeHandler("@ghostery/adblocker/is-mutation-observer-enabled"))}}class h extends o.FiltersEngine{constructor(){super(...arguments),this.contexts=new WeakMap,this.onIsMutationObserverEnabled=async e=>this.config.enableMutationObserver,this.onInjectCosmeticFilters=async(e,t,o)=>{const r=s.parse(t),n=r.hostname||"",i=r.domain||"",l=void 0===o,{active:c,styles:a,scripts:d}=this.getCosmeticsFilters({domain:i,hostname:n,url:t,classes:null==o?void 0:o.classes,hrefs:null==o?void 0:o.hrefs,ids:null==o?void 0:o.ids,getBaseRules:l,getInjectionRules:l,getExtendedRules:!1,getRulesFromHostname:l,getRulesFromDOM:!l,callerContext:{frameId:e.frameId,processId:e.processId,lifecycle:null==o?void 0:o.lifecycle}});if(!1!==c){a.length>0&&e.sender.insertCSS(a,{cssOrigin:"user"});for(const t of d)try{e.sender.executeJavaScript(t,!0)}catch(e){console.error("@ghostery/adblocker scriptlet crashed",e)}}},this.onHeadersReceived=(e,t)=>{const s="content-security-policy",o=[],r=e.responseHeaders||{};if("mainFrame"===e.resourceType||"subFrame"===e.resourceType){const n=this.getCSPDirectives(d(e));if(void 0!==n){o.push(...n.split(";").map((e=>e.trim())));for(const[e,t]of Object.entries(r))e.toLowerCase()===s&&(o.push(...t),delete r[e]);return r[s]=[o.join(";")],void t({responseHeaders:r})}}t({})},this.onBeforeRequest=(e,t)=>{const s=d(e);if(!0===this.config.guessRequestTypeFromUrl&&"other"===s.type&&s.guessTypeOfRequest(),s.isMainFrame())return void t({});const{redirect:o,match:r}=this.match(s);t(o?{redirectURL:o.dataUrl}:r?{cancel:!0}:{})}}enableBlockingInSession(e){let t=this.contexts.get(e);return void 0!==t||(t=new u(e,this),this.contexts.set(e,t),t.enable()),t}disableBlockingInSession(e){const t=this.contexts.get(e);if(void 0===t)throw new Error("Trying to disable blocking which was not enabled");this.contexts.delete(e),t.disable()}isBlockingEnabled(e){return this.contexts.has(e)}}e.BlockingContext=u,e.ElectronBlocker=h,e.fromElectronDetails=d,Object.keys(o).forEach((function(t){"default"===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}))}));
+!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("electron"),require("tldts-experimental"),require("@ghostery/adblocker"),require("node:module")):"function"==typeof define&&define.amd?define(["exports","electron","tldts-experimental","@ghostery/adblocker","node:module"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).adblocker={},e.electron,e.tldtsExperimental,e.adblocker,e.node_module)}(this,(function(e,t,s,r,o){"use strict";var n="undefined"!=typeof document?document.currentScript:null;function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(s){if("default"!==s){var r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return e[s]}})}})),t.default=e,Object.freeze(t)}var l=i(t);const c=o.createRequire("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:n&&"SCRIPT"===n.tagName.toUpperCase()&&n.src||new URL("adblocker.umd.min.js",document.baseURI).href).resolve("@ghostery/adblocker-electron-preload"),{ipcMain:a}=l;function d(e){const{id:t,url:s,resourceType:o,referrer:n,webContentsId:i}=e;return r.Request.fromRawDetails(i?{_originalRequestDetails:e,requestId:`${t}`,sourceUrl:n,tabId:i,type:o||"other",url:s}:{_originalRequestDetails:e,requestId:`${t}`,sourceUrl:n,type:o||"other",url:s})}process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";class u{constructor(e,t,s){this.session=e,this.blocker=t,this.registerWebRequestHandlers=s,this.registerWebRequestHandlers=s,this.onBeforeRequest=(e,s)=>t.onBeforeRequest(e,s),this.onInjectCosmeticFilters=(e,s,r)=>t.onInjectCosmeticFilters(e,s,r),this.onHeadersReceived=(e,s)=>t.onHeadersReceived(e,s),this.onIsMutationObserverEnabled=e=>t.onIsMutationObserverEnabled(e)}enable(){!0===this.blocker.config.loadCosmeticFilters&&(this.session.setPreloads(this.session.getPreloads().concat([c])),a.handle("@ghostery/adblocker/inject-cosmetic-filters",this.onInjectCosmeticFilters),a.handle("@ghostery/adblocker/is-mutation-observer-enabled",this.onIsMutationObserverEnabled)),!0===this.blocker.config.loadNetworkFilters&&this.registerWebRequestHandlers&&(this.session.webRequest.onHeadersReceived({urls:["<all_urls>"]},this.onHeadersReceived),this.session.webRequest.onBeforeRequest({urls:["<all_urls>"]},this.onBeforeRequest))}disable(){!0===this.blocker.config.loadNetworkFilters&&this.registerWebRequestHandlers&&(this.session.webRequest.onHeadersReceived(null),this.session.webRequest.onBeforeRequest(null)),!0===this.blocker.config.loadCosmeticFilters&&(this.session.setPreloads(this.session.getPreloads().filter((e=>e!==c))),a.removeHandler("@ghostery/adblocker/inject-cosmetic-filters"),a.removeHandler("@ghostery/adblocker/is-mutation-observer-enabled"))}}class h extends r.FiltersEngine{constructor(){super(...arguments),this.contexts=new WeakMap,this.onIsMutationObserverEnabled=async e=>this.config.enableMutationObserver,this.onInjectCosmeticFilters=async(e,t,r)=>{const o=s.parse(t),n=o.hostname||"",i=o.domain||"",l=void 0===r,{active:c,styles:a,scripts:d}=this.getCosmeticsFilters({domain:i,hostname:n,url:t,classes:null==r?void 0:r.classes,hrefs:null==r?void 0:r.hrefs,ids:null==r?void 0:r.ids,getBaseRules:l,getInjectionRules:l,getExtendedRules:!1,getRulesFromHostname:l,getRulesFromDOM:!l,callerContext:{frameId:e.frameId,processId:e.processId,lifecycle:null==r?void 0:r.lifecycle}});if(!1!==c){a.length>0&&e.sender.insertCSS(a,{cssOrigin:"user"});for(const t of d)try{e.sender.executeJavaScript(t,!0)}catch(e){console.error("@ghostery/adblocker scriptlet crashed",e)}}},this.onHeadersReceived=(e,t)=>{const s="content-security-policy",r=[],o=e.responseHeaders||{};if("mainFrame"===e.resourceType||"subFrame"===e.resourceType){const n=this.getCSPDirectives(d(e));if(void 0!==n){r.push(...n.split(";").map((e=>e.trim())));for(const[e,t]of Object.entries(o))e.toLowerCase()===s&&(r.push(...t),delete o[e]);return o[s]=[r.join(";")],void t({responseHeaders:o})}}t({})},this.onBeforeRequest=(e,t)=>{const s=d(e);if(!0===this.config.guessRequestTypeFromUrl&&"other"===s.type&&s.guessTypeOfRequest(),s.isMainFrame())return void t({});const{redirect:r,match:o}=this.match(s);t(r?{redirectURL:r.dataUrl}:o?{cancel:!0}:{})}}enableBlockingInSession(e,t=!0){let s=this.contexts.get(e);return void 0!==s||(s=new u(e,this,t),this.contexts.set(e,s),s.enable()),s}disableBlockingInSession(e){const t=this.contexts.get(e);if(void 0===t)throw new Error("Trying to disable blocking which was not enabled");this.contexts.delete(e),t.disable()}isBlockingEnabled(e){return this.contexts.has(e)}}e.BlockingContext=u,e.ElectronBlocker=h,e.fromElectronDetails=d,Object.keys(r).forEach((function(t){"default"===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}))}));
 //# sourceMappingURL=adblocker.umd.min.js.map
diff --git a/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js.map b/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js.map
index a5cdbda..072cb98 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js.map
+++ b/node_modules/@ghostery/adblocker-electron/dist/adblocker.umd.min.js.map
@@ -1 +1 @@
-{"version":3,"file":"adblocker.umd.min.js","sources":["esm/preload_path.js","esm/index.js"],"sourcesContent":["import { createRequire } from 'node:module';\n//@ts-ignore\nexport const PRELOAD_PATH = createRequire(import.meta.url).resolve('@ghostery/adblocker-electron-preload');\n//# sourceMappingURL=preload_path.js.map","/*!\n * Copyright (c) 2017-present Ghostery GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport * as electron from 'electron';\nimport { parse } from 'tldts-experimental';\nimport { FiltersEngine, Request } from '@ghostery/adblocker';\nimport { PRELOAD_PATH } from './preload_path.js';\nconst { ipcMain } = electron;\n// https://stackoverflow.com/questions/48854265/why-do-i-see-an-electron-security-warning-after-updating-my-electron-project-t\nprocess.env['ELECTRON_DISABLE_SECURITY_WARNINGS'] = 'true';\n/**\n * Create an instance of `Request` from `Electron.OnBeforeRequestDetails`.\n */\nexport function fromElectronDetails(details) {\n    const { id, url, resourceType, referrer, webContentsId } = details;\n    return Request.fromRawDetails(webContentsId\n        ? {\n            _originalRequestDetails: details,\n            requestId: `${id}`,\n            sourceUrl: referrer,\n            tabId: webContentsId,\n            type: (resourceType || 'other'),\n            url,\n        }\n        : {\n            _originalRequestDetails: details,\n            requestId: `${id}`,\n            sourceUrl: referrer,\n            type: (resourceType || 'other'),\n            url,\n        });\n}\n/**\n * This abstraction takes care of blocking in one instance of `Electron.Session`.\n */\nexport class BlockingContext {\n    constructor(session, blocker) {\n        this.session = session;\n        this.blocker = blocker;\n        this.onBeforeRequest = (details, callback) => blocker.onBeforeRequest(details, callback);\n        this.onInjectCosmeticFilters = (event, url, msg) => blocker.onInjectCosmeticFilters(event, url, msg);\n        this.onHeadersReceived = (details, callback) => blocker.onHeadersReceived(details, callback);\n        this.onIsMutationObserverEnabled = (event) => blocker.onIsMutationObserverEnabled(event);\n    }\n    enable() {\n        if (this.blocker.config.loadCosmeticFilters === true) {\n            this.session.setPreloads(this.session.getPreloads().concat([PRELOAD_PATH]));\n            ipcMain.handle('@ghostery/adblocker/inject-cosmetic-filters', this.onInjectCosmeticFilters);\n            ipcMain.handle('@ghostery/adblocker/is-mutation-observer-enabled', this.onIsMutationObserverEnabled);\n        }\n        if (this.blocker.config.loadNetworkFilters === true) {\n            this.session.webRequest.onHeadersReceived({ urls: ['<all_urls>'] }, this.onHeadersReceived);\n            this.session.webRequest.onBeforeRequest({ urls: ['<all_urls>'] }, this.onBeforeRequest);\n        }\n    }\n    disable() {\n        if (this.blocker.config.loadNetworkFilters === true) {\n            // NOTE - there is currently no support in Electron for multiple\n            // webRequest listeners registered for the same event. This means that\n            // adblocker's listeners can be overriden by other ones in the same\n            // application (or that the adblocker can override another listener\n            // registered previously). Because of this, the only way to disable the\n            // adblocker is to remove all listeners for the events we are interested\n            // in. In the future, we should consider implementing a webRequest\n            // pipeline allowing to register multiple listeners for the same event.\n            this.session.webRequest.onHeadersReceived(null);\n            this.session.webRequest.onBeforeRequest(null);\n        }\n        if (this.blocker.config.loadCosmeticFilters === true) {\n            this.session.setPreloads(this.session.getPreloads().filter((p) => p !== PRELOAD_PATH));\n            ipcMain.removeHandler('@ghostery/adblocker/inject-cosmetic-filters');\n            ipcMain.removeHandler('@ghostery/adblocker/is-mutation-observer-enabled');\n        }\n    }\n}\n/**\n * Wrap `FiltersEngine` into a Electron-friendly helper class. It exposes\n * methods to interface with Electron APIs needed to block ads.\n */\nexport class ElectronBlocker extends FiltersEngine {\n    constructor() {\n        super(...arguments);\n        this.contexts = new WeakMap();\n        // ----------------------------------------------------------------------- //\n        // ElectronBlocker-specific additions to FiltersEngine\n        // ----------------------------------------------------------------------- //\n        this.onIsMutationObserverEnabled = async (_) => {\n            return this.config.enableMutationObserver;\n        };\n        this.onInjectCosmeticFilters = async (event, url, msg) => {\n            const parsed = parse(url);\n            const hostname = parsed.hostname || '';\n            const domain = parsed.domain || '';\n            // `msg` is undefined for the initial call and present for subsequent updates\n            const isFirstRun = msg === undefined;\n            const { active, styles, scripts } = this.getCosmeticsFilters({\n                domain,\n                hostname,\n                url,\n                // DOM information, only available for updates\n                classes: msg === null || msg === void 0 ? void 0 : msg.classes,\n                hrefs: msg === null || msg === void 0 ? void 0 : msg.hrefs,\n                ids: msg === null || msg === void 0 ? void 0 : msg.ids,\n                // Rules to fetch: true for initial call, false for updates\n                getBaseRules: isFirstRun,\n                getInjectionRules: isFirstRun,\n                getExtendedRules: false,\n                getRulesFromHostname: isFirstRun,\n                // Only true for update calls when we have DOM information\n                getRulesFromDOM: !isFirstRun,\n                callerContext: {\n                    frameId: event.frameId,\n                    processId: event.processId,\n                    lifecycle: msg === null || msg === void 0 ? void 0 : msg.lifecycle,\n                },\n            });\n            if (active === false) {\n                return;\n            }\n            if (styles.length > 0) {\n                event.sender.insertCSS(styles, { cssOrigin: 'user' });\n            }\n            for (const script of scripts) {\n                try {\n                    event.sender.executeJavaScript(script, true);\n                }\n                catch (e) {\n                    console.error('@ghostery/adblocker scriptlet crashed', e);\n                }\n            }\n        };\n        this.onHeadersReceived = (details, callback) => {\n            const CSP_HEADER_NAME = 'content-security-policy';\n            const policies = [];\n            const responseHeaders = details.responseHeaders || {};\n            if (details.resourceType === 'mainFrame' || details.resourceType === 'subFrame') {\n                const rawCSP = this.getCSPDirectives(fromElectronDetails(details));\n                if (rawCSP !== undefined) {\n                    policies.push(...rawCSP.split(';').map((csp) => csp.trim()));\n                    // Collect existing CSP headers from response\n                    for (const [name, values] of Object.entries(responseHeaders)) {\n                        if (name.toLowerCase() === CSP_HEADER_NAME) {\n                            policies.push(...values);\n                            delete responseHeaders[name];\n                        }\n                    }\n                    responseHeaders[CSP_HEADER_NAME] = [policies.join(';')];\n                    callback({ responseHeaders });\n                    return;\n                }\n            }\n            callback({});\n        };\n        this.onBeforeRequest = (details, callback) => {\n            const request = fromElectronDetails(details);\n            if (this.config.guessRequestTypeFromUrl === true && request.type === 'other') {\n                request.guessTypeOfRequest();\n            }\n            if (request.isMainFrame()) {\n                callback({});\n                return;\n            }\n            const { redirect, match } = this.match(request);\n            if (redirect) {\n                callback({ redirectURL: redirect.dataUrl });\n            }\n            else if (match) {\n                callback({ cancel: true });\n            }\n            else {\n                callback({});\n            }\n        };\n    }\n    // ----------------------------------------------------------------------- //\n    // Helpers to enable and disable blocking for 'browser'\n    // ----------------------------------------------------------------------- //\n    enableBlockingInSession(session) {\n        let context = this.contexts.get(session);\n        if (context !== undefined) {\n            return context;\n        }\n        // Create new blocking context for `session`\n        context = new BlockingContext(session, this);\n        this.contexts.set(session, context);\n        context.enable();\n        return context;\n    }\n    disableBlockingInSession(session) {\n        const context = this.contexts.get(session);\n        if (context === undefined) {\n            throw new Error('Trying to disable blocking which was not enabled');\n        }\n        this.contexts.delete(session);\n        context.disable();\n    }\n    isBlockingEnabled(session) {\n        return this.contexts.has(session);\n    }\n}\n// re-export @ghostery/adblocker symbols for convenience\nexport * from '@ghostery/adblocker';\n//# sourceMappingURL=index.js.map"],"names":["PRELOAD_PATH","createRequire","document","location","require","pathToFileURL","__filename","href","_documentCurrentScript","tagName","toUpperCase","src","URL","baseURI","resolve","ipcMain","electron","fromElectronDetails","details","id","url","resourceType","referrer","webContentsId","Request","fromRawDetails","_originalRequestDetails","requestId","sourceUrl","tabId","type","process","env","BlockingContext","constructor","session","blocker","this","onBeforeRequest","callback","onInjectCosmeticFilters","event","msg","onHeadersReceived","onIsMutationObserverEnabled","enable","config","loadCosmeticFilters","setPreloads","getPreloads","concat","handle","loadNetworkFilters","webRequest","urls","disable","filter","p","removeHandler","ElectronBlocker","FiltersEngine","super","arguments","contexts","WeakMap","async","_","enableMutationObserver","parsed","parse","hostname","domain","isFirstRun","undefined","active","styles","scripts","getCosmeticsFilters","classes","hrefs","ids","getBaseRules","getInjectionRules","getExtendedRules","getRulesFromHostname","getRulesFromDOM","callerContext","frameId","processId","lifecycle","length","sender","insertCSS","cssOrigin","script","executeJavaScript","e","console","error","CSP_HEADER_NAME","policies","responseHeaders","rawCSP","getCSPDirectives","push","split","map","csp","trim","name","values","Object","entries","toLowerCase","join","request","guessRequestTypeFromUrl","guessTypeOfRequest","isMainFrame","redirect","match","redirectURL","dataUrl","cancel","enableBlockingInSession","context","get","set","disableBlockingInSession","Error","delete","isBlockingEnabled","has"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"adblocker.umd.min.js","sources":["esm/preload_path.js","esm/index.js"],"sourcesContent":["import { createRequire } from 'node:module';\n//@ts-ignore\nexport const PRELOAD_PATH = createRequire(import.meta.url).resolve('@ghostery/adblocker-electron-preload');\n//# sourceMappingURL=preload_path.js.map","/*!\n * Copyright (c) 2017-present Ghostery GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport * as electron from 'electron';\nimport { parse } from 'tldts-experimental';\nimport { FiltersEngine, Request } from '@ghostery/adblocker';\nimport { PRELOAD_PATH } from './preload_path.js';\nconst { ipcMain } = electron;\n// https://stackoverflow.com/questions/48854265/why-do-i-see-an-electron-security-warning-after-updating-my-electron-project-t\nprocess.env['ELECTRON_DISABLE_SECURITY_WARNINGS'] = 'true';\n/**\n * Create an instance of `Request` from `Electron.OnBeforeRequestDetails`.\n */\nexport function fromElectronDetails(details) {\n    const { id, url, resourceType, referrer, webContentsId } = details;\n    return Request.fromRawDetails(webContentsId\n        ? {\n            _originalRequestDetails: details,\n            requestId: `${id}`,\n            sourceUrl: referrer,\n            tabId: webContentsId,\n            type: (resourceType || 'other'),\n            url,\n        }\n        : {\n            _originalRequestDetails: details,\n            requestId: `${id}`,\n            sourceUrl: referrer,\n            type: (resourceType || 'other'),\n            url,\n        });\n}\n/**\n * This abstraction takes care of blocking in one instance of `Electron.Session`.\n */\nexport class BlockingContext {\n    constructor(session, blocker, registerWebRequestHandlers) {\n        this.session = session;\n        this.blocker = blocker;\n        this.registerWebRequestHandlers = registerWebRequestHandlers;\n        this.registerWebRequestHandlers = registerWebRequestHandlers;\n        this.onBeforeRequest = (details, callback) => blocker.onBeforeRequest(details, callback);\n        this.onInjectCosmeticFilters = (event, url, msg) => blocker.onInjectCosmeticFilters(event, url, msg);\n        this.onHeadersReceived = (details, callback) => blocker.onHeadersReceived(details, callback);\n        this.onIsMutationObserverEnabled = (event) => blocker.onIsMutationObserverEnabled(event);\n    }\n    enable() {\n        if (this.blocker.config.loadCosmeticFilters === true) {\n            this.session.setPreloads(this.session.getPreloads().concat([PRELOAD_PATH]));\n            ipcMain.handle('@ghostery/adblocker/inject-cosmetic-filters', this.onInjectCosmeticFilters);\n            ipcMain.handle('@ghostery/adblocker/is-mutation-observer-enabled', this.onIsMutationObserverEnabled);\n        }\n        if (this.blocker.config.loadNetworkFilters === true && this.registerWebRequestHandlers) {\n            this.session.webRequest.onHeadersReceived({ urls: ['<all_urls>'] }, this.onHeadersReceived);\n            this.session.webRequest.onBeforeRequest({ urls: ['<all_urls>'] }, this.onBeforeRequest);\n        }\n    }\n    disable() {\n        if (this.blocker.config.loadNetworkFilters === true && this.registerWebRequestHandlers) {\n            this.session.webRequest.onHeadersReceived(null);\n            this.session.webRequest.onBeforeRequest(null);\n        }\n        if (this.blocker.config.loadCosmeticFilters === true) {\n            this.session.setPreloads(this.session.getPreloads().filter((p) => p !== PRELOAD_PATH));\n            ipcMain.removeHandler('@ghostery/adblocker/inject-cosmetic-filters');\n            ipcMain.removeHandler('@ghostery/adblocker/is-mutation-observer-enabled');\n        }\n    }\n}\n/**\n * Wrap `FiltersEngine` into a Electron-friendly helper class. It exposes\n * methods to interface with Electron APIs needed to block ads.\n */\nexport class ElectronBlocker extends FiltersEngine {\n    constructor() {\n        super(...arguments);\n        this.contexts = new WeakMap();\n        // ----------------------------------------------------------------------- //\n        // ElectronBlocker-specific additions to FiltersEngine\n        // ----------------------------------------------------------------------- //\n        this.onIsMutationObserverEnabled = async (_) => {\n            return this.config.enableMutationObserver;\n        };\n        this.onInjectCosmeticFilters = async (event, url, msg) => {\n            const parsed = parse(url);\n            const hostname = parsed.hostname || '';\n            const domain = parsed.domain || '';\n            // `msg` is undefined for the initial call and present for subsequent updates\n            const isFirstRun = msg === undefined;\n            const { active, styles, scripts } = this.getCosmeticsFilters({\n                domain,\n                hostname,\n                url,\n                // DOM information, only available for updates\n                classes: msg === null || msg === void 0 ? void 0 : msg.classes,\n                hrefs: msg === null || msg === void 0 ? void 0 : msg.hrefs,\n                ids: msg === null || msg === void 0 ? void 0 : msg.ids,\n                // Rules to fetch: true for initial call, false for updates\n                getBaseRules: isFirstRun,\n                getInjectionRules: isFirstRun,\n                getExtendedRules: false,\n                getRulesFromHostname: isFirstRun,\n                // Only true for update calls when we have DOM information\n                getRulesFromDOM: !isFirstRun,\n                callerContext: {\n                    frameId: event.frameId,\n                    processId: event.processId,\n                    lifecycle: msg === null || msg === void 0 ? void 0 : msg.lifecycle,\n                },\n            });\n            if (active === false) {\n                return;\n            }\n            if (styles.length > 0) {\n                event.sender.insertCSS(styles, { cssOrigin: 'user' });\n            }\n            for (const script of scripts) {\n                try {\n                    event.sender.executeJavaScript(script, true);\n                }\n                catch (e) {\n                    console.error('@ghostery/adblocker scriptlet crashed', e);\n                }\n            }\n        };\n        this.onHeadersReceived = (details, callback) => {\n            const CSP_HEADER_NAME = 'content-security-policy';\n            const policies = [];\n            const responseHeaders = details.responseHeaders || {};\n            if (details.resourceType === 'mainFrame' || details.resourceType === 'subFrame') {\n                const rawCSP = this.getCSPDirectives(fromElectronDetails(details));\n                if (rawCSP !== undefined) {\n                    policies.push(...rawCSP.split(';').map((csp) => csp.trim()));\n                    // Collect existing CSP headers from response\n                    for (const [name, values] of Object.entries(responseHeaders)) {\n                        if (name.toLowerCase() === CSP_HEADER_NAME) {\n                            policies.push(...values);\n                            delete responseHeaders[name];\n                        }\n                    }\n                    responseHeaders[CSP_HEADER_NAME] = [policies.join(';')];\n                    callback({ responseHeaders });\n                    return;\n                }\n            }\n            callback({});\n        };\n        this.onBeforeRequest = (details, callback) => {\n            const request = fromElectronDetails(details);\n            if (this.config.guessRequestTypeFromUrl === true && request.type === 'other') {\n                request.guessTypeOfRequest();\n            }\n            if (request.isMainFrame()) {\n                callback({});\n                return;\n            }\n            const { redirect, match } = this.match(request);\n            if (redirect) {\n                callback({ redirectURL: redirect.dataUrl });\n            }\n            else if (match) {\n                callback({ cancel: true });\n            }\n            else {\n                callback({});\n            }\n        };\n    }\n    // ----------------------------------------------------------------------- //\n    // Helpers to enable and disable blocking for 'browser'\n    // ----------------------------------------------------------------------- //\n    enableBlockingInSession(session, registerWebRequestHandlers = true) {\n        let context = this.contexts.get(session);\n        if (context !== undefined) {\n            return context;\n        }\n        // Create new blocking context for `session`\n        context = new BlockingContext(session, this, registerWebRequestHandlers);\n        this.contexts.set(session, context);\n        context.enable();\n        return context;\n    }\n    disableBlockingInSession(session) {\n        const context = this.contexts.get(session);\n        if (context === undefined) {\n            throw new Error('Trying to disable blocking which was not enabled');\n        }\n        this.contexts.delete(session);\n        context.disable();\n    }\n    isBlockingEnabled(session) {\n        return this.contexts.has(session);\n    }\n}\n// re-export @ghostery/adblocker symbols for convenience\nexport * from '@ghostery/adblocker';\n//# sourceMappingURL=index.js.map"],"names":["PRELOAD_PATH","createRequire","document","location","require","pathToFileURL","__filename","href","_documentCurrentScript","tagName","toUpperCase","src","URL","baseURI","resolve","ipcMain","electron","fromElectronDetails","details","id","url","resourceType","referrer","webContentsId","Request","fromRawDetails","_originalRequestDetails","requestId","sourceUrl","tabId","type","process","env","BlockingContext","constructor","session","blocker","registerWebRequestHandlers","this","onBeforeRequest","callback","onInjectCosmeticFilters","event","msg","onHeadersReceived","onIsMutationObserverEnabled","enable","config","loadCosmeticFilters","setPreloads","getPreloads","concat","handle","loadNetworkFilters","webRequest","urls","disable","filter","p","removeHandler","ElectronBlocker","FiltersEngine","super","arguments","contexts","WeakMap","async","_","enableMutationObserver","parsed","parse","hostname","domain","isFirstRun","undefined","active","styles","scripts","getCosmeticsFilters","classes","hrefs","ids","getBaseRules","getInjectionRules","getExtendedRules","getRulesFromHostname","getRulesFromDOM","callerContext","frameId","processId","lifecycle","length","sender","insertCSS","cssOrigin","script","executeJavaScript","e","console","error","CSP_HEADER_NAME","policies","responseHeaders","rawCSP","getCSPDirectives","push","split","map","csp","trim","name","values","Object","entries","toLowerCase","join","request","guessRequestTypeFromUrl","guessTypeOfRequest","isMainFrame","redirect","match","redirectURL","dataUrl","cancel","enableBlockingInSession","context","get","set","disableBlockingInSession","Error","delete","isBlockingEnabled","has"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts
index ebcb5c6..fc175be 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts
+++ b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts
@@ -17,11 +17,12 @@ export declare function fromElectronDetails(details: Electron.OnHeadersReceivedL
 export declare class BlockingContext {
     private readonly session;
     private readonly blocker;
-    private readonly onBeforeRequest;
+    private readonly registerWebRequestHandlers;
+    readonly onBeforeRequest: (details: Electron.OnBeforeRequestListenerDetails, callback: (a: Electron.CallbackResponse) => void) => void;
+    readonly onHeadersReceived: (details: Electron.OnHeadersReceivedListenerDetails, callback: (a: Electron.HeadersReceivedResponse) => void) => void;
     private readonly onInjectCosmeticFilters;
-    private readonly onHeadersReceived;
     private readonly onIsMutationObserverEnabled;
-    constructor(session: Electron.Session, blocker: ElectronBlocker);
+    constructor(session: Electron.Session, blocker: ElectronBlocker, registerWebRequestHandlers: boolean);
     enable(): void;
     disable(): void;
 }
@@ -31,7 +32,7 @@ export declare class BlockingContext {
  */
 export declare class ElectronBlocker extends FiltersEngine {
     private readonly contexts;
-    enableBlockingInSession(session: Electron.Session): BlockingContext;
+    enableBlockingInSession(session: Electron.Session, registerWebRequestHandlers?: boolean): BlockingContext;
     disableBlockingInSession(session: Electron.Session): void;
     isBlockingEnabled(session: Electron.Session): boolean;
     onIsMutationObserverEnabled: (_: Electron.IpcMainInvokeEvent) => Promise<boolean>;
diff --git a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts.map b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts.map
index c5fd9d9..1d821a7 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts.map
+++ b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAKH,OAAO,EAAuB,aAAa,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAClF,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,sCAAsC,CAAC;AAShF;;GAEG;AACH,wBAAgB,mBAAmB,CACjC,OAAO,EAAE,QAAQ,CAAC,gCAAgC,GAAG,QAAQ,CAAC,8BAA8B,GAC3F,OAAO,CAoBT;AAED;;GAEG;AACH,qBAAa,eAAe;IAsBxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IACxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IAtB1B,OAAO,CAAC,QAAQ,CAAC,eAAe,CAGtB;IAEV,OAAO,CAAC,QAAQ,CAAC,uBAAuB,CAIrB;IAEnB,OAAO,CAAC,QAAQ,CAAC,iBAAiB,CAGxB;IAEV,OAAO,CAAC,QAAQ,CAAC,2BAA2B,CAEtB;gBAGH,OAAO,EAAE,QAAQ,CAAC,OAAO,EACzB,OAAO,EAAE,eAAe;IAUpC,MAAM,IAAI,IAAI;IAgBd,OAAO,IAAI,IAAI;CAoBvB;AAED;;;GAGG;AACH,qBAAa,eAAgB,SAAQ,aAAa;IAChD,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAA6D;IAM/E,uBAAuB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,eAAe;IAcnE,wBAAwB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,IAAI;IAUzD,iBAAiB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,OAAO;IAQrD,2BAA2B,MAC7B,QAAQ,CAAC,kBAAkB,KAC7B,OAAO,CAAC,OAAO,CAAC,CAEjB;IAEK,uBAAuB,UACrB,QAAQ,CAAC,kBAAkB,OAC7B,MAAM,QACL,mBAAmB,KACxB,OAAO,CAAC,IAAI,CAAC,CAiDd;IAEK,iBAAiB,YACb,QAAQ,CAAC,gCAAgC,YACxC,CAAC,CAAC,EAAE,QAAQ,CAAC,uBAAuB,KAAK,IAAI,KACtD,IAAI,CA0BL;IAEK,eAAe,YACX,QAAQ,CAAC,8BAA8B,YACtC,CAAC,CAAC,EAAE,QAAQ,CAAC,gBAAgB,KAAK,IAAI,KAC/C,IAAI,CAoBL;CACH;AAGD,cAAc,qBAAqB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAKH,OAAO,EAAuB,aAAa,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAClF,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,sCAAsC,CAAC;AAShF;;GAEG;AACH,wBAAgB,mBAAmB,CACjC,OAAO,EAAE,QAAQ,CAAC,gCAAgC,GAAG,QAAQ,CAAC,8BAA8B,GAC3F,OAAO,CAoBT;AAED;;GAEG;AACH,qBAAa,eAAe;IAsBxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IACxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IACxB,OAAO,CAAC,QAAQ,CAAC,0BAA0B;IAvB7C,SAAgB,eAAe,EAAE,CAC/B,OAAO,EAAE,QAAQ,CAAC,8BAA8B,EAChD,QAAQ,EAAE,CAAC,CAAC,EAAE,QAAQ,CAAC,gBAAgB,KAAK,IAAI,KAC7C,IAAI,CAAC;IAEV,SAAgB,iBAAiB,EAAE,CACjC,OAAO,EAAE,QAAQ,CAAC,gCAAgC,EAClD,QAAQ,EAAE,CAAC,CAAC,EAAE,QAAQ,CAAC,uBAAuB,KAAK,IAAI,KACpD,IAAI,CAAC;IAEV,OAAO,CAAC,QAAQ,CAAC,uBAAuB,CAIrB;IAEnB,OAAO,CAAC,QAAQ,CAAC,2BAA2B,CAEtB;gBAGH,OAAO,EAAE,QAAQ,CAAC,OAAO,EACzB,OAAO,EAAE,eAAe,EACxB,0BAA0B,EAAE,OAAO;IAW/C,MAAM,IAAI,IAAI;IAgBd,OAAO,IAAI,IAAI;CAYvB;AAED;;;GAGG;AACH,qBAAa,eAAgB,SAAQ,aAAa;IAChD,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAA6D;IAM/E,uBAAuB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,EAAE,0BAA0B,GAAE,OAAc,GAAG,eAAe;IAc/G,wBAAwB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,IAAI;IAUzD,iBAAiB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,OAAO;IAQrD,2BAA2B,MAC7B,QAAQ,CAAC,kBAAkB,KAC7B,OAAO,CAAC,OAAO,CAAC,CAEjB;IAEK,uBAAuB,UACrB,QAAQ,CAAC,kBAAkB,OAC7B,MAAM,QACL,mBAAmB,KACxB,OAAO,CAAC,IAAI,CAAC,CAiDd;IAEK,iBAAiB,YACb,QAAQ,CAAC,gCAAgC,YACxC,CAAC,CAAC,EAAE,QAAQ,CAAC,uBAAuB,KAAK,IAAI,KACtD,IAAI,CA0BL;IAEK,eAAe,YACX,QAAQ,CAAC,8BAA8B,YACtC,CAAC,CAAC,EAAE,QAAQ,CAAC,gBAAgB,KAAK,IAAI,KAC/C,IAAI,CAoBL;CACH;AAGD,cAAc,qBAAqB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js
index 4553385..8959a1c 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js
+++ b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js
@@ -68,9 +68,11 @@ function fromElectronDetails(details) {
  * This abstraction takes care of blocking in one instance of `Electron.Session`.
  */
 class BlockingContext {
-    constructor(session, blocker) {
+    constructor(session, blocker, registerWebRequestHandlers) {
         this.session = session;
         this.blocker = blocker;
+        this.registerWebRequestHandlers = registerWebRequestHandlers;
+        this.registerWebRequestHandlers = registerWebRequestHandlers;
         this.onBeforeRequest = (details, callback) => blocker.onBeforeRequest(details, callback);
         this.onInjectCosmeticFilters = (event, url, msg) => blocker.onInjectCosmeticFilters(event, url, msg);
         this.onHeadersReceived = (details, callback) => blocker.onHeadersReceived(details, callback);
@@ -82,21 +84,13 @@ class BlockingContext {
             ipcMain.handle('@ghostery/adblocker/inject-cosmetic-filters', this.onInjectCosmeticFilters);
             ipcMain.handle('@ghostery/adblocker/is-mutation-observer-enabled', this.onIsMutationObserverEnabled);
         }
-        if (this.blocker.config.loadNetworkFilters === true) {
+        if (this.blocker.config.loadNetworkFilters === true && this.registerWebRequestHandlers) {
             this.session.webRequest.onHeadersReceived({ urls: ['<all_urls>'] }, this.onHeadersReceived);
             this.session.webRequest.onBeforeRequest({ urls: ['<all_urls>'] }, this.onBeforeRequest);
         }
     }
     disable() {
-        if (this.blocker.config.loadNetworkFilters === true) {
-            // NOTE - there is currently no support in Electron for multiple
-            // webRequest listeners registered for the same event. This means that
-            // adblocker's listeners can be overriden by other ones in the same
-            // application (or that the adblocker can override another listener
-            // registered previously). Because of this, the only way to disable the
-            // adblocker is to remove all listeners for the events we are interested
-            // in. In the future, we should consider implementing a webRequest
-            // pipeline allowing to register multiple listeners for the same event.
+        if (this.blocker.config.loadNetworkFilters === true && this.registerWebRequestHandlers) {
             this.session.webRequest.onHeadersReceived(null);
             this.session.webRequest.onBeforeRequest(null);
         }
@@ -210,13 +204,13 @@ class ElectronBlocker extends adblocker_1.FiltersEngine {
     // ----------------------------------------------------------------------- //
     // Helpers to enable and disable blocking for 'browser'
     // ----------------------------------------------------------------------- //
-    enableBlockingInSession(session) {
+    enableBlockingInSession(session, registerWebRequestHandlers = true) {
         let context = this.contexts.get(session);
         if (context !== undefined) {
             return context;
         }
         // Create new blocking context for `session`
-        context = new BlockingContext(session, this);
+        context = new BlockingContext(session, this, registerWebRequestHandlers);
         this.contexts.set(session, context);
         context.enable();
         return context;
diff --git a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js.map b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js.map
index 1daf117..291faad 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js.map
+++ b/node_modules/@ghostery/adblocker-electron/dist/commonjs/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts b/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts
index ebcb5c6..fc175be 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts
+++ b/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts
@@ -17,11 +17,12 @@ export declare function fromElectronDetails(details: Electron.OnHeadersReceivedL
 export declare class BlockingContext {
     private readonly session;
     private readonly blocker;
-    private readonly onBeforeRequest;
+    private readonly registerWebRequestHandlers;
+    readonly onBeforeRequest: (details: Electron.OnBeforeRequestListenerDetails, callback: (a: Electron.CallbackResponse) => void) => void;
+    readonly onHeadersReceived: (details: Electron.OnHeadersReceivedListenerDetails, callback: (a: Electron.HeadersReceivedResponse) => void) => void;
     private readonly onInjectCosmeticFilters;
-    private readonly onHeadersReceived;
     private readonly onIsMutationObserverEnabled;
-    constructor(session: Electron.Session, blocker: ElectronBlocker);
+    constructor(session: Electron.Session, blocker: ElectronBlocker, registerWebRequestHandlers: boolean);
     enable(): void;
     disable(): void;
 }
@@ -31,7 +32,7 @@ export declare class BlockingContext {
  */
 export declare class ElectronBlocker extends FiltersEngine {
     private readonly contexts;
-    enableBlockingInSession(session: Electron.Session): BlockingContext;
+    enableBlockingInSession(session: Electron.Session, registerWebRequestHandlers?: boolean): BlockingContext;
     disableBlockingInSession(session: Electron.Session): void;
     isBlockingEnabled(session: Electron.Session): boolean;
     onIsMutationObserverEnabled: (_: Electron.IpcMainInvokeEvent) => Promise<boolean>;
diff --git a/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts.map b/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts.map
index c5fd9d9..1d821a7 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts.map
+++ b/node_modules/@ghostery/adblocker-electron/dist/esm/index.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAKH,OAAO,EAAuB,aAAa,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAClF,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,sCAAsC,CAAC;AAShF;;GAEG;AACH,wBAAgB,mBAAmB,CACjC,OAAO,EAAE,QAAQ,CAAC,gCAAgC,GAAG,QAAQ,CAAC,8BAA8B,GAC3F,OAAO,CAoBT;AAED;;GAEG;AACH,qBAAa,eAAe;IAsBxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IACxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IAtB1B,OAAO,CAAC,QAAQ,CAAC,eAAe,CAGtB;IAEV,OAAO,CAAC,QAAQ,CAAC,uBAAuB,CAIrB;IAEnB,OAAO,CAAC,QAAQ,CAAC,iBAAiB,CAGxB;IAEV,OAAO,CAAC,QAAQ,CAAC,2BAA2B,CAEtB;gBAGH,OAAO,EAAE,QAAQ,CAAC,OAAO,EACzB,OAAO,EAAE,eAAe;IAUpC,MAAM,IAAI,IAAI;IAgBd,OAAO,IAAI,IAAI;CAoBvB;AAED;;;GAGG;AACH,qBAAa,eAAgB,SAAQ,aAAa;IAChD,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAA6D;IAM/E,uBAAuB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,eAAe;IAcnE,wBAAwB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,IAAI;IAUzD,iBAAiB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,OAAO;IAQrD,2BAA2B,MAC7B,QAAQ,CAAC,kBAAkB,KAC7B,OAAO,CAAC,OAAO,CAAC,CAEjB;IAEK,uBAAuB,UACrB,QAAQ,CAAC,kBAAkB,OAC7B,MAAM,QACL,mBAAmB,KACxB,OAAO,CAAC,IAAI,CAAC,CAiDd;IAEK,iBAAiB,YACb,QAAQ,CAAC,gCAAgC,YACxC,CAAC,CAAC,EAAE,QAAQ,CAAC,uBAAuB,KAAK,IAAI,KACtD,IAAI,CA0BL;IAEK,eAAe,YACX,QAAQ,CAAC,8BAA8B,YACtC,CAAC,CAAC,EAAE,QAAQ,CAAC,gBAAgB,KAAK,IAAI,KAC/C,IAAI,CAoBL;CACH;AAGD,cAAc,qBAAqB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAKH,OAAO,EAAuB,aAAa,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAClF,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,sCAAsC,CAAC;AAShF;;GAEG;AACH,wBAAgB,mBAAmB,CACjC,OAAO,EAAE,QAAQ,CAAC,gCAAgC,GAAG,QAAQ,CAAC,8BAA8B,GAC3F,OAAO,CAoBT;AAED;;GAEG;AACH,qBAAa,eAAe;IAsBxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IACxB,OAAO,CAAC,QAAQ,CAAC,OAAO;IACxB,OAAO,CAAC,QAAQ,CAAC,0BAA0B;IAvB7C,SAAgB,eAAe,EAAE,CAC/B,OAAO,EAAE,QAAQ,CAAC,8BAA8B,EAChD,QAAQ,EAAE,CAAC,CAAC,EAAE,QAAQ,CAAC,gBAAgB,KAAK,IAAI,KAC7C,IAAI,CAAC;IAEV,SAAgB,iBAAiB,EAAE,CACjC,OAAO,EAAE,QAAQ,CAAC,gCAAgC,EAClD,QAAQ,EAAE,CAAC,CAAC,EAAE,QAAQ,CAAC,uBAAuB,KAAK,IAAI,KACpD,IAAI,CAAC;IAEV,OAAO,CAAC,QAAQ,CAAC,uBAAuB,CAIrB;IAEnB,OAAO,CAAC,QAAQ,CAAC,2BAA2B,CAEtB;gBAGH,OAAO,EAAE,QAAQ,CAAC,OAAO,EACzB,OAAO,EAAE,eAAe,EACxB,0BAA0B,EAAE,OAAO;IAW/C,MAAM,IAAI,IAAI;IAgBd,OAAO,IAAI,IAAI;CAYvB;AAED;;;GAGG;AACH,qBAAa,eAAgB,SAAQ,aAAa;IAChD,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAA6D;IAM/E,uBAAuB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,EAAE,0BAA0B,GAAE,OAAc,GAAG,eAAe;IAc/G,wBAAwB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,IAAI;IAUzD,iBAAiB,CAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,GAAG,OAAO;IAQrD,2BAA2B,MAC7B,QAAQ,CAAC,kBAAkB,KAC7B,OAAO,CAAC,OAAO,CAAC,CAEjB;IAEK,uBAAuB,UACrB,QAAQ,CAAC,kBAAkB,OAC7B,MAAM,QACL,mBAAmB,KACxB,OAAO,CAAC,IAAI,CAAC,CAiDd;IAEK,iBAAiB,YACb,QAAQ,CAAC,gCAAgC,YACxC,CAAC,CAAC,EAAE,QAAQ,CAAC,uBAAuB,KAAK,IAAI,KACtD,IAAI,CA0BL;IAEK,eAAe,YACX,QAAQ,CAAC,8BAA8B,YACtC,CAAC,CAAC,EAAE,QAAQ,CAAC,gBAAgB,KAAK,IAAI,KAC/C,IAAI,CAoBL;CACH;AAGD,cAAc,qBAAqB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@ghostery/adblocker-electron/dist/esm/index.js b/node_modules/@ghostery/adblocker-electron/dist/esm/index.js
index 04b32db..08a4c68 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/esm/index.js
+++ b/node_modules/@ghostery/adblocker-electron/dist/esm/index.js
@@ -38,9 +38,11 @@ export function fromElectronDetails(details) {
  * This abstraction takes care of blocking in one instance of `Electron.Session`.
  */
 export class BlockingContext {
-    constructor(session, blocker) {
+    constructor(session, blocker, registerWebRequestHandlers) {
         this.session = session;
         this.blocker = blocker;
+        this.registerWebRequestHandlers = registerWebRequestHandlers;
+        this.registerWebRequestHandlers = registerWebRequestHandlers;
         this.onBeforeRequest = (details, callback) => blocker.onBeforeRequest(details, callback);
         this.onInjectCosmeticFilters = (event, url, msg) => blocker.onInjectCosmeticFilters(event, url, msg);
         this.onHeadersReceived = (details, callback) => blocker.onHeadersReceived(details, callback);
@@ -52,21 +54,13 @@ export class BlockingContext {
             ipcMain.handle('@ghostery/adblocker/inject-cosmetic-filters', this.onInjectCosmeticFilters);
             ipcMain.handle('@ghostery/adblocker/is-mutation-observer-enabled', this.onIsMutationObserverEnabled);
         }
-        if (this.blocker.config.loadNetworkFilters === true) {
+        if (this.blocker.config.loadNetworkFilters === true && this.registerWebRequestHandlers) {
             this.session.webRequest.onHeadersReceived({ urls: ['<all_urls>'] }, this.onHeadersReceived);
             this.session.webRequest.onBeforeRequest({ urls: ['<all_urls>'] }, this.onBeforeRequest);
         }
     }
     disable() {
-        if (this.blocker.config.loadNetworkFilters === true) {
-            // NOTE - there is currently no support in Electron for multiple
-            // webRequest listeners registered for the same event. This means that
-            // adblocker's listeners can be overriden by other ones in the same
-            // application (or that the adblocker can override another listener
-            // registered previously). Because of this, the only way to disable the
-            // adblocker is to remove all listeners for the events we are interested
-            // in. In the future, we should consider implementing a webRequest
-            // pipeline allowing to register multiple listeners for the same event.
+        if (this.blocker.config.loadNetworkFilters === true && this.registerWebRequestHandlers) {
             this.session.webRequest.onHeadersReceived(null);
             this.session.webRequest.onBeforeRequest(null);
         }
@@ -179,13 +173,13 @@ export class ElectronBlocker extends FiltersEngine {
     // ----------------------------------------------------------------------- //
     // Helpers to enable and disable blocking for 'browser'
     // ----------------------------------------------------------------------- //
-    enableBlockingInSession(session) {
+    enableBlockingInSession(session, registerWebRequestHandlers = true) {
         let context = this.contexts.get(session);
         if (context !== undefined) {
             return context;
         }
         // Create new blocking context for `session`
-        context = new BlockingContext(session, this);
+        context = new BlockingContext(session, this, registerWebRequestHandlers);
         this.contexts.set(session, context);
         context.enable();
         return context;
diff --git a/node_modules/@ghostery/adblocker-electron/dist/esm/index.js.map b/node_modules/@ghostery/adblocker-electron/dist/esm/index.js.map
index 847d291..44c8844 100644
--- a/node_modules/@ghostery/adblocker-electron/dist/esm/index.js.map
+++ b/node_modules/@ghostery/adblocker-electron/dist/esm/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAEH,OAAO,KAAK,QAAQ,MAAM,UAAU,CAAC;AACrC,OAAO,EAAE,KAAK,EAAE,MAAM,oBAAoB,CAAC;AAE3C,OAAO,EAAuB,aAAa,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAGlF,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AAEjD,MAAM,EAAE,OAAO,EAAE,GAAG,QAAQ,CAAC;AAE7B,8HAA8H;AAC9H,OAAO,CAAC,GAAG,CAAC,oCAAoC,CAAC,GAAG,MAAM,CAAC;AAE3D;;GAEG;AACH,MAAM,UAAU,mBAAmB,CACjC,OAA4F;IAE5F,MAAM,EAAE,EAAE,EAAE,GAAG,EAAE,YAAY,EAAE,QAAQ,EAAE,aAAa,EAAE,GAAG,OAAO,CAAC;IACnE,OAAO,OAAO,CAAC,cAAc,CAC3B,aAAa;QACX,CAAC,CAAC;YACE,uBAAuB,EAAE,OAAO;YAChC,SAAS,EAAE,GAAG,EAAE,EAAE;YAClB,SAAS,EAAE,QAAQ;YACnB,KAAK,EAAE,aAAa;YACpB,IAAI,EAAE,CAAC,YAAY,IAAI,OAAO,CAAwB;YACtD,GAAG;SACJ;QACH,CAAC,CAAC;YACE,uBAAuB,EAAE,OAAO;YAChC,SAAS,EAAE,GAAG,EAAE,EAAE;YAClB,SAAS,EAAE,QAAQ;YACnB,IAAI,EAAE,CAAC,YAAY,IAAI,OAAO,CAAwB;YACtD,GAAG;SACJ,CACN,CAAC;AACJ,CAAC;AAED;;GAEG;AACH,MAAM,OAAO,eAAe;IAqB1B,YACmB,OAAyB,EACzB,OAAwB;QADxB,YAAO,GAAP,OAAO,CAAkB;QACzB,YAAO,GAAP,OAAO,CAAiB;QAEzC,IAAI,CAAC,eAAe,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAEzF,IAAI,CAAC,uBAAuB,GAAG,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CACjD,OAAO,CAAC,uBAAuB,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QACnD,IAAI,CAAC,iBAAiB,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE,CAAC,OAAO,CAAC,iBAAiB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC7F,IAAI,CAAC,2BAA2B,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,OAAO,CAAC,2BAA2B,CAAC,KAAK,CAAC,CAAC;IAC3F,CAAC;IAEM,MAAM;QACX,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,mBAAmB,KAAK,IAAI,EAAE,CAAC;YACrD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAC5E,OAAO,CAAC,MAAM,CAAC,6CAA6C,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;YAC5F,OAAO,CAAC,MAAM,CACZ,kDAAkD,EAClD,IAAI,CAAC,2BAA2B,CACjC,CAAC;QACJ,CAAC;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,kBAAkB,KAAK,IAAI,EAAE,CAAC;YACpD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,iBAAiB,CAAC,EAAE,IAAI,EAAE,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAC5F,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAC1F,CAAC;IACH,CAAC;IAEM,OAAO;QACZ,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,kBAAkB,KAAK,IAAI,EAAE,CAAC;YACpD,gEAAgE;YAChE,sEAAsE;YACtE,mEAAmE;YACnE,mEAAmE;YACnE,uEAAuE;YACvE,wEAAwE;YACxE,kEAAkE;YAClE,uEAAuE;YACvE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAChD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAChD,CAAC;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,mBAAmB,KAAK,IAAI,EAAE,CAAC;YACrD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,YAAY,CAAC,CAAC,CAAC;YACvF,OAAO,CAAC,aAAa,CAAC,6CAA6C,CAAC,CAAC;YACrE,OAAO,CAAC,aAAa,CAAC,kDAAkD,CAAC,CAAC;QAC5E,CAAC;IACH,CAAC;CACF;AAED;;;GAGG;AACH,MAAM,OAAO,eAAgB,SAAQ,aAAa;IAAlD;;QACmB,aAAQ,GAA+C,IAAI,OAAO,EAAE,CAAC;QAkCtF,6EAA6E;QAC7E,sDAAsD;QACtD,6EAA6E;QAEtE,gCAA2B,GAAG,KAAK,EACxC,CAA8B,EACZ,EAAE;YACpB,OAAO,IAAI,CAAC,MAAM,CAAC,sBAAsB,CAAC;QAC5C,CAAC,CAAC;QAEK,4BAAuB,GAAG,KAAK,EACpC,KAAkC,EAClC,GAAW,EACX,GAAyB,EACV,EAAE;YACjB,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;YAC1B,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,EAAE,CAAC;YACvC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,EAAE,CAAC;YAEnC,6EAA6E;YAC7E,MAAM,UAAU,GAAG,GAAG,KAAK,SAAS,CAAC;YAErC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC;gBAC3D,MAAM;gBACN,QAAQ;gBACR,GAAG;gBAEH,8CAA8C;gBAC9C,OAAO,EAAE,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,OAAO;gBACrB,KAAK,EAAE,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,KAAK;gBACjB,GAAG,EAAE,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,GAAG;gBAEb,2DAA2D;gBAC3D,YAAY,EAAE,UAAU;gBACxB,iBAAiB,EAAE,UAAU;gBAC7B,gBAAgB,EAAE,KAAK;gBACvB,oBAAoB,EAAE,UAAU;gBAEhC,0DAA0D;gBAC1D,eAAe,EAAE,CAAC,UAAU;gBAE5B,aAAa,EAAE;oBACb,OAAO,EAAE,KAAK,CAAC,OAAO;oBACtB,SAAS,EAAE,KAAK,CAAC,SAAS;oBAC1B,SAAS,EAAE,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,SAAS;iBAC1B;aACF,CAAC,CAAC;YAEH,IAAI,MAAM,KAAK,KAAK,EAAE,CAAC;gBACrB,OAAO;YACT,CAAC;YAED,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACtB,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE,CAAC,CAAC;YACxD,CAAC;YAED,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;gBAC7B,IAAI,CAAC;oBACH,KAAK,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBAC/C,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACX,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,CAAC,CAAC,CAAC;gBAC5D,CAAC;YACH,CAAC;QACH,CAAC,CAAC;QAEK,sBAAiB,GAAG,CACzB,OAAkD,EAClD,QAAuD,EACjD,EAAE;YACR,MAAM,eAAe,GAAG,yBAAyB,CAAC;YAClD,MAAM,QAAQ,GAAa,EAAE,CAAC;YAC9B,MAAM,eAAe,GAA6B,OAAO,CAAC,eAAe,IAAI,EAAE,CAAC;YAEhF,IAAI,OAAO,CAAC,YAAY,KAAK,WAAW,IAAI,OAAO,CAAC,YAAY,KAAK,UAAU,EAAE,CAAC;gBAChF,MAAM,MAAM,GAAuB,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC;gBACvF,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;oBACzB,QAAQ,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;oBAE7D,6CAA6C;oBAC7C,KAAK,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC;wBAC7D,IAAI,IAAI,CAAC,WAAW,EAAE,KAAK,eAAe,EAAE,CAAC;4BAC3C,QAAQ,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;4BACzB,OAAO,eAAe,CAAC,IAAI,CAAC,CAAC;wBAC/B,CAAC;oBACH,CAAC;oBAED,eAAe,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;oBAExD,QAAQ,CAAC,EAAE,eAAe,EAAE,CAAC,CAAC;oBAC9B,OAAO;gBACT,CAAC;YACH,CAAC;YAED,QAAQ,CAAC,EAAE,CAAC,CAAC;QACf,CAAC,CAAC;QAEK,oBAAe,GAAG,CACvB,OAAgD,EAChD,QAAgD,EAC1C,EAAE;YACR,MAAM,OAAO,GAAG,mBAAmB,CAAC,OAAO,CAAC,CAAC;YAC7C,IAAI,IAAI,CAAC,MAAM,CAAC,uBAAuB,KAAK,IAAI,IAAI,OAAO,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;gBAC7E,OAAO,CAAC,kBAAkB,EAAE,CAAC;YAC/B,CAAC;YAED,IAAI,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;gBAC1B,QAAQ,CAAC,EAAE,CAAC,CAAC;gBACb,OAAO;YACT,CAAC;YAED,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YAEhD,IAAI,QAAQ,EAAE,CAAC;gBACb,QAAQ,CAAC,EAAE,WAAW,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;YAC9C,CAAC;iBAAM,IAAI,KAAK,EAAE,CAAC;gBACjB,QAAQ,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;YAC7B,CAAC;iBAAM,CAAC;gBACN,QAAQ,CAAC,EAAE,CAAC,CAAC;YACf,CAAC;QACH,CAAC,CAAC;IACJ,CAAC;IAxJC,6EAA6E;IAC7E,uDAAuD;IACvD,6EAA6E;IAEtE,uBAAuB,CAAC,OAAyB;QACtD,IAAI,OAAO,GAAgC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACtE,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;YAC1B,OAAO,OAAO,CAAC;QACjB,CAAC;QAED,4CAA4C;QAC5C,OAAO,GAAG,IAAI,eAAe,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACpC,OAAO,CAAC,MAAM,EAAE,CAAC;QAEjB,OAAO,OAAO,CAAC;IACjB,CAAC;IAEM,wBAAwB,CAAC,OAAyB;QACvD,MAAM,OAAO,GAAgC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACxE,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;YAC1B,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAC;QACtE,CAAC;QAED,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAC9B,OAAO,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAEM,iBAAiB,CAAC,OAAyB;QAChD,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;CA0HF;AAED,wDAAwD;AACxD,cAAc,qBAAqB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
